/* --- General Layout & Body --- */
* { 
    box-sizing: border-box; 
}
html, body { 
    margin: 0; 
    padding: 0; 
    height: 100%; 
    width: 100%; 
    overflow: hidden; 
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
    background-color: #f0f2f5; 
}

/* --- Sign-In & User Button --- */
#sign-in-container { 
    width: 100%; 
    max-width: 400px; 
    padding: 2rem; 
    margin: auto; 
    background-color: white; 
    border-radius: 8px; 
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); 
}
#user-button { 
    position: absolute; 
    top: 15px; 
    right: 15px; 
    z-index: 1000; 
}

/* --- Main App Layout (Mobile First) --- */
#app-content { 
    width: 100%; 
    height: 100%; 
    display: flex; 
}

/* --- Off-Canvas Actions Panel (Mobile View) --- */
#actions-panel {
    position: fixed;
    top: 0;
    left: 0;
    height: 100%;
    width: 280px;
    background-color: #ffffff;
    box-shadow: 4px 0 15px rgba(0,0,0,0.1);
    padding: 1.5rem;
    transform: translateX(-100%); /* Hidden by default */
    transition: transform 0.3s ease-in-out;
    z-index: 2000;
}
#actions-panel.is-open {
    transform: translateX(0); /* Visible when class is added */
}
.panel-header { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    margin-bottom: 1.5rem; 
}
.panel-title { 
    font-size: 1.2rem; 
    margin: 0; 
    color: #333; 
}
#close-panel-btn { 
    font-size: 2rem; 
    background: none; 
    border: none; 
    cursor: pointer; 
    color: #888; 
}
.action-btn { 
    width: 100%; 
    padding: 12px; 
    margin-bottom: 1rem; 
    font-size: 0.9rem; 
    text-align: left; 
    background-color: #f4f4f9; 
    border: 1px solid #e0e0e0; 
    border-radius: 6px; 
    cursor: pointer; 
    transition: background-color 0.2s ease; 
}
.action-btn:hover { 
    background-color: #e9e9f3; 
}

/* --- Menu Toggle Button (Mobile View) --- */
#menu-toggle-btn {
    position: fixed;
    top: 15px;
    left: 15px;
    width: 40px;
    height: 40px;
    background-color: white;
    border: 1px solid #ddd;
    border-radius: 50%;
    cursor: pointer;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
#menu-toggle-btn svg { 
    width: 24px; 
    height: 24px; 
    color: #333; 
}

/* --- Overlay (Mobile View) --- */
#overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.4);
    z-index: 1999;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
}
#overlay.is-visible {
    opacity: 1;
    visibility: visible;
}

/* --- Tracker Panel Styles --- */
#tracker-panel {
    background-color: #fdfdff;
    padding: 1.5rem;
    border-right: 1px solid #e0e0e0;
    display: none; /* Hidden on mobile by default */
    flex-direction: column;
    overflow-y: auto;
}
#tracker-form label { 
    font-weight: 600; 
    font-size: 0.9rem; 
    margin-bottom: 0.5rem; 
    display: block; 
}
#tracker-form input[type="range"] { 
    width: 100%; 
    margin-bottom: 1rem; 
}
#symptom-tags { 
    display: flex; 
    flex-wrap: wrap; 
    gap: 0.5rem; 
    margin-bottom: 1rem; 
}
.symptom-tag { 
    background-color: #eef; 
    border: 1px solid #ccd; 
    border-radius: 15px; 
    padding: 5px 12px; 
    cursor: pointer; 
    font-size: 0.8rem; 
}
.symptom-tag.selected { 
    background-color: #685FFF; 
    color: white; 
    border-color: #685FFF; 
}
#tracker-form textarea { 
    width: 100%; 
    border: 1px solid #ccc; 
    border-radius: 4px; 
    padding: 8px; 
    margin-bottom: 1rem; 
    resize: vertical;
}
#add-entry-btn { 
    width: 100%; 
    padding: 12px; 
    background-color: #685FFF; 
    color: white; 
    border: none; 
    border-radius: 6px; 
    font-weight: 600; 
    cursor: pointer; 
}
#log-history-wrapper { 
    margin-top: 1rem; 
    display: flex; 
    flex-direction: column; 
    flex-grow: 1; 
    min-height: 150px;
}
#log-history { 
    background-color: #f4f4f9; 
    border-radius: 4px; 
    padding: 1rem; 
    flex-grow: 1; 
    overflow-y: auto; 
}
.log-entry { 
    margin-bottom: 1rem; 
    border-bottom: 1px solid #ddd; 
    padding-bottom: 1rem; 
    font-size: 0.9rem; 
}
.log-entry:last-child { 
    border-bottom: none; 
}
#copy-log-btn { 
    margin-top: 1rem; 
    padding: 10px; 
    background-color: #333; 
    color: white; 
    border: none; 
    border-radius: 6px; 
    cursor: pointer; 
}

/* --- Iframe & Loading --- */
#iframe-container { 
    width: 100%; 
    height: 100%; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
}
iframe { 
    border: 0; 
    width: 100%; 
    height: 100%; 
}
#loading-spinner { 
    border: 5px solid #f3f3f3; 
    border-top: 5px solid #685FFF; 
    border-radius: 50%; 
    width: 50px; 
    height: 50px; 
    animation: spin 1s linear infinite; 
}
@keyframes spin { 
    0% { transform: rotate(0deg); } 
    100% { transform: rotate(360deg); } 
}
#error-container { 
    display: none; 
    text-align: center; 
    color: #d32f2f; 
}

/* --- Desktop Layout Adjustments --- */
@media (min-width: 1024px) {
    #app-content {
        display: grid;
        grid-template-columns: 280px 320px 1fr; /* Actions, Tracker, Chat */
    }
    #actions-panel {
        position: static;
        transform: translateX(0);
        box-shadow: none;
        border-right: 1px solid #e0e0e0;
    }
    #tracker-panel {
        display: flex;
    }
    #menu-toggle-btn, #close-panel-btn, #overlay {
        display: none;
    }
}

/* --- Tablet Layout Adjustments --- */
@media (min-width: 769px) and (max-width: 1023px) {
    #app-content {
        display: grid;
        grid-template-columns: 300px 1fr; /* Tracker and Chat */
    }
    #actions-panel {
        position: fixed; /* Keep it as a slide-out menu */
    }
    #tracker-panel {
        display: flex;
    }
    #menu-toggle-btn { 
        display: flex; 
    }
}
